/* Основные стили для квеста-расследования */
:root {
    --cyber-green: #00ff9d;
    --cyber-blue: #00b3ff;
    --cyber-purple: #9d4edd;
    --cyber-pink: #ff006e;
    --cyber-yellow: #f59e0b;
    --dark-bg: #0a0a0f;
    --card-bg: #1a1a2e;
    --terminal-bg: #0a0a0a;
    --header-height: 5rem;
    --header-height-mobile: 4.5rem;
}

body {
    background-color: var(--dark-bg);
    overflow-x: hidden;
    font-family: 'Roboto Mono', monospace;
}

/* Шрифты */
.font-mono {
    font-family: 'Roboto Mono', monospace;
}

/* Цвета текста */
.text-cyber-green {
    color: var(--cyber-green);
}

.text-cyber-blue {
    color: var(--cyber-blue);
}

.text-cyber-purple {
    color: var(--cyber-purple);
}

.text-cyber-pink {
    color: var(--cyber-pink);
}

.text-cyber-yellow {
    color: var(--cyber-yellow);
}

/* 1. Кнопка "Принять вызов" */
.start-btn {
    background: linear-gradient(135deg, var(--cyber-green), var(--cyber-blue), var(--cyber-purple));
    color: white;
    border: none;
    box-shadow: 0 10px 30px rgba(0, 179, 255, 0.3);
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
    overflow: hidden;
}

.start-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
    transition: left 0.7s ease;
}

.start-btn:hover::before {
    left: 100%;
}

.start-btn:hover {
    box-shadow: 0 15px 40px rgba(0, 179, 255, 0.5);
}

/* Логотип */
.digital-logo {
    display: flex;
    justify-content: center;
    gap: 15px;
}

.logo-digit {
    font-size: 4rem;
    font-weight: 900;
    color: var(--cyber-blue);
    text-shadow: 0 0 10px var(--cyber-blue);
    animation: digit-glow 2s infinite alternate;
}

.logo-digit:nth-child(2) {
    animation-delay: 0.2s;
    color: var(--cyber-green);
    text-shadow: 0 0 10px var(--cyber-green);
}

.logo-digit:nth-child(3) {
    animation-delay: 0.4s;
    color: var(--cyber-purple);
    text-shadow: 0 0 10px var(--cyber-purple);
}

.logo-digit:nth-child(4) {
    animation-delay: 0.6s;
    color: var(--cyber-pink);
    text-shadow: 0 0 10px var(--cyber-pink);
}

@keyframes digit-glow {
    from { opacity: 0.7; transform: translateY(0); }
    to { opacity: 1; transform: translateY(-5px); }
}

/* Анимация печатающегося текста */
.typing-animation {
    overflow: hidden;
    white-space: nowrap;
    border-right: 2px solid var(--cyber-green);
    animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
}

@keyframes typing {
    from { width: 0 }
    to { width: 100% }
}

@keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: var(--cyber-green); }
}

/* Карточки навыков */
.skill-card {
    border: 1px solid transparent;
    transition: all 0.3s ease;
}

.skill-card:hover {
    transform: translateY(-5px);
    border-color: var(--cyber-blue);
    box-shadow: 0 10px 20px rgba(0, 179, 255, 0.1);
}

.skill-card:nth-child(1):hover {
    border-color: var(--cyber-green);
    box-shadow: 0 10px 20px rgba(0, 255, 157, 0.1);
}

.skill-card:nth-child(2):hover {
    border-color: var(--cyber-purple);
    box-shadow: 0 10px 20px rgba(157, 78, 221, 0.1);
}

/* ШАПКА ПРОГРЕССА */
#progress-container {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background-color: #1a1a2e;
    border-bottom: 2px solid var(--cyber-blue);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    height: auto;
    min-height: var(--header-height);
}

#progress-bar {
    height: 4px;
    background: linear-gradient(90deg, var(--cyber-green), var(--cyber-blue), var(--cyber-purple));
    transition: width 0.5s ease;
}

/* Основной контейнер с отступом для шапки */
#quest-container {
    margin-top: var(--header-height);
    position: relative;
    z-index: 1;
}

@media (max-width: 768px) {
    #progress-container {
        min-height: var(--header-height-mobile);
    }
    
    #quest-container {
        margin-top: var(--header-height-mobile);
    }
}

/* Заголовок дела */
.case-header {
    border-bottom: 2px solid var(--cyber-blue);
    padding-bottom: 1rem;
    margin-top: 1rem;
}

.case-tag {
    display: inline-block;
    background-color: var(--cyber-blue);
    color: black;
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 0.9rem;
}

/* Карточка улики */
.evidence-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    overflow: hidden;
    border: 1px solid #2d2d44;
    margin-top: 1rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.evidence-header {
    background-color: #0a0a0f;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #2d2d44;
    display: flex;
    align-items: center;
    gap: 10px;
}

.evidence-header i {
    color: var(--cyber-blue);
    font-size: 1.2rem;
}

.evidence-content {
    padding: 1.5rem;
}

/* Подсказка в карточке */
.clue-hint {
    background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));
    border: 1px solid var(--cyber-yellow);
    border-radius: 10px;
    padding: 1rem;
    display: flex;
    align-items: flex-start;
}

/* Зашифрованный текст */
.encrypted-text {
    background-color: #0a0a0f;
    padding: 1.5rem;
    border-radius: 8px;
    border-left: 4px solid var(--cyber-purple);
    font-family: 'Courier New', monospace;
    line-height: 1.6;
}

/* Карточка головоломки */
.puzzle-card {
    background-color: var(--card-bg);
    border-radius: 12px;
    padding: 1.5rem;
    border: 1px solid #2d2d44;
    margin-top: 1rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.puzzle-input input {
    color: white;
    font-family: 'Roboto Mono', monospace;
    background-color: #0a0a0f;
    border: 1px solid #2d2d44;
}

.puzzle-input input:focus {
    outline: none;
    border-color: var(--cyber-blue);
    box-shadow: 0 0 0 2px rgba(0, 179, 255, 0.2);
}

/* Кнопка проверки */
.puzzle-check-btn {
    background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-green));
    color: black;
    border: none;
    padding: 12px 24px;
    border-radius: 8px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.puzzle-check-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 179, 255, 0.3);
}

/* Бейдж навыка */
.skill-badge {
    display: inline-block;
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 0.9rem;
}

.skill-badge.isit {
    background-color: rgba(0, 255, 157, 0.1);
    color: var(--cyber-green);
    border: 1px solid var(--cyber-green);
}

.skill-badge.bist {
    background-color: rgba(157, 78, 221, 0.1);
    color: var(--cyber-purple);
    border: 1px solid var(--cyber-purple);
}

/* Терминал */
.terminal-window {
    background-color: var(--terminal-bg);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #2d2d44;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
    margin-top: 1rem;
}

.terminal-header {
    background-color: #1a1a2e;
    padding: 10px 15px;
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.terminal-dots {
    display: flex;
    gap: 8px;
}

.dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
}

.dot.red { background-color: #ff5f56; }
.dot.yellow { background-color: #ffbd2e; }
.dot.green { background-color: #27ca3f; }

.terminal-title {
    color: #b0b0c0;
    font-size: 0.9rem;
}

.terminal-body {
    padding: 1.5rem;
    font-family: 'Courier New', monospace;
    line-height: 1.6;
}

.terminal-line {
    margin-bottom: 8px;
    color: #e0e0e0;
}

.prompt {
    color: var(--cyber-green);
    margin-right: 10px;
}

.input-line {
    display: flex;
    align-items: center;
}

.typed-text {
    color: white;
}

.cursor {
    animation: blink 1s infinite;
    color: var(--cyber-green);
}

@keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
}

/* Задание 2: Восстановление логов */
.log-entries {
    background-color: #0a0a0f;
    border-radius: 8px;
    border: 1px solid #2d2d44;
}

.log-entry {
    padding: 10px;
    border-bottom: 1px solid #2d2d44;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
}

.log-entry.damaged {
    color: var(--cyber-pink);
    background-color: rgba(255, 0, 110, 0.1);
    border-left: 3px solid var(--cyber-pink);
}

.login-option {
    display: flex;
    align-items: center;
    padding: 12px;
    background-color: #0a0a0f;
    border-radius: 8px;
    border: 1px solid #2d2d44;
    transition: all 0.3s ease;
    margin-bottom: 8px;
    cursor: pointer;
}

.login-option:hover {
    border-color: var(--cyber-green);
    background-color: rgba(0, 255, 157, 0.05);
}

.login-radio {
    margin-right: 12px;
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.login-label {
    cursor: pointer;
    flex-grow: 1;
    font-family: 'Courier New', monospace;
}

/* База данных */
.database-viewer {
    background-color: var(--terminal-bg);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #2d2d44;
    margin-top: 1rem;
}

.db-header {
    background-color: #1a1a2e;
    padding: 12px 15px;
    border-bottom: 1px solid #2d2d44;
}

.db-title {
    color: #b0b0c0;
    font-size: 0.9rem;
    font-weight: bold;
}

.db-body {
    padding: 0;
}

.db-row {
    display: grid;
    grid-template-columns: 50px 1fr 1fr;
    padding: 10px 15px;
    border-bottom: 1px solid #2d2d44;
    align-items: center;
}

.db-row.header {
    background-color: #1a1a2e;
    font-weight: bold;
}

.db-row:last-child {
    border-bottom: none;
}

.db-row.highlight {
    background-color: rgba(0, 255, 157, 0.1);
    border-left: 3px solid var(--cyber-green);
}

.db-field {
    color: var(--cyber-blue);
    font-size: 0.9rem;
}

.db-value {
    color: #e0e0e0;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
}

/* Задание 3: Кастомные чекбоксы */
.custom-checkbox {
    display: none;
}

.custom-checkbox-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    padding: 10px;
    border-radius: 8px;
    transition: all 0.3s ease;
    width: 100%;
}

.custom-checkbox-label:hover {
    background-color: rgba(0, 179, 255, 0.05);
}

.custom-checkbox-checkmark {
    width: 24px;
    height: 24px;
    border: 2px solid #2d2d44;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    flex-shrink: 0;
}

.custom-checkbox:checked + .custom-checkbox-label .custom-checkbox-checkmark {
    background-color: var(--cyber-green);
    border-color: var(--cyber-green);
}

.custom-checkbox:checked + .custom-checkbox-label .custom-checkbox-checkmark::after {
    content: '✓';
    color: black;
    font-weight: bold;
    font-size: 14px;
}

/* Код с уязвимостями */
.code-snippet {
    background-color: #0a0a0f;
    padding: 1.5rem;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    font-size: 0.9rem;
    line-height: 1.6;
    overflow-x: auto;
}

.code-snippet pre {
    margin: 0;
    white-space: pre-wrap;
}

.code-snippet code {
    color: #e0e0e0;
}

/* Сканер уязвимостей */
.vulnerability-scanner {
    background-color: var(--terminal-bg);
    border-radius: 8px;
    overflow: hidden;
    border: 1px solid #2d2d44;
    margin-top: 1rem;
}

.scanner-header {
    background-color: #1a1a2e;
    padding: 12px 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid #2d2d44;
}

.scanner-title {
    color: #b0b0c0;
    font-size: 0.9rem;
    font-weight: bold;
}

.scanner-status {
    color: var(--cyber-yellow);
    font-size: 0.8rem;
}

.scanner-body {
    padding: 1.5rem;
}

.scan-line {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px dashed #2d2d44;
}

.scan-icon {
    color: var(--cyber-blue);
    margin-right: 10px;
    width: 20px;
}

.scan-text {
    flex-grow: 1;
    color: #e0e0e0;
}

.scan-result {
    color: var(--cyber-green);
    font-weight: bold;
    font-size: 0.9rem;
}

.scan-progress {
    height: 6px;
    background-color: #2d2d44;
    border-radius: 3px;
    margin-top: 20px;
    overflow: hidden;
}

.progress-bar-inner {
    height: 100%;
    background: linear-gradient(90deg, var(--cyber-blue), var(--cyber-green));
    width: 0%;
    transition: width 1s ease;
}

/* Задание 4: Логическая блок-схема */
.logic-flowchart {
    position: relative;
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.flowchart-start {
    text-align: center;
    margin-bottom: 30px;
}

.flowchart-node {
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border: 2px solid var(--cyber-blue);
    border-radius: 8px;
    padding: 15px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 200px;
    box-shadow: 0 5px 15px rgba(0, 179, 255, 0.2);
}

.flowchart-node i {
    margin-right: 10px;
    font-size: 1.2rem;
}

.flowchart-node.condition {
    border-color: var(--cyber-purple);
    min-width: 220px;
}

.flowchart-node.condition i {
    color: var(--cyber-purple);
}

.flowchart-node.action {
    border-color: var(--cyber-green);
}

.flowchart-node.action i {
    color: var(--cyber-green);
}

.flowchart-connector {
    position: relative;
    height: 30px;
    width: 2px;
    background-color: var(--cyber-blue);
    margin: 0 auto;
}

.flowchart-connector.down::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 6px solid transparent;
    border-right: 6px solid transparent;
    border-top: 8px solid var(--cyber-blue);
}

.flowchart-action.allowed .flowchart-node {
    border-color: var(--cyber-green);
    box-shadow: 0 5px 15px rgba(0, 255, 157, 0.2);
}

.algorithm-option {
    display: flex;
    align-items: center;
    padding: 12px;
    background-color: #0a0a0f;
    border-radius: 8px;
    border: 1px solid #2d2d44;
    transition: all 0.3s ease;
    margin-bottom: 8px;
    cursor: pointer;
}

.algorithm-option:hover {
    border-color: var(--cyber-blue);
    background-color: rgba(0, 179, 255, 0.05);
}

.algorithm-radio {
    margin-right: 12px;
    width: 20px;
    height: 20px;
    cursor: pointer;
}

.algorithm-label {
    cursor: pointer;
    flex-grow: 1;
    line-height: 1.4;
}

/* Задание 5: Доска улик */
.evidence-connections {
    position: relative;
    width: 100%;
    height: 400px;
    background: linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.8));
    border-radius: 15px;
    border: 2px solid var(--cyber-blue);
    overflow: hidden;
}

.connection-node {
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-purple));
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
    box-shadow: 0 5px 15px rgba(0, 179, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    z-index: 2;
}

.connection-node:hover {
    transform: scale(1.1);
    box-shadow: 0 8px 25px rgba(0, 179, 255, 0.5);
}

.connection-node.message {
    top: 20%;
    left: 15%;
    background: linear-gradient(135deg, var(--cyber-purple), #6a11cb);
}

.connection-node.logs {
    top: 20%;
    right: 15%;
    background: linear-gradient(135deg, var(--cyber-green), #00b09b);
}

.connection-node.code {
    bottom: 20%;
    left: 15%;
    background: linear-gradient(135deg, var(--cyber-pink), #ff416c);
}

.connection-node.algorithm {
    bottom: 20%;
    right: 15%;
    background: linear-gradient(135deg, var(--cyber-yellow), #ffb347);
}

.connection-node[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    top: -40px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 0.8rem;
    white-space: nowrap;
    z-index: 10;
}

.connection-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-green));
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: white;
    box-shadow: 0 10px 30px rgba(0, 179, 255, 0.4);
    z-index: 3;
    animation: pulse 2s infinite;
}

@keyframes pulse {
    0% { box-shadow: 0 10px 30px rgba(0, 179, 255, 0.4); }
    50% { box-shadow: 0 10px 40px rgba(0, 179, 255, 0.6); }
    100% { box-shadow: 0 10px 30px rgba(0, 179, 255, 0.4); }
}

.center-label {
    font-size: 0.8rem;
    margin-top: 5px;
    font-weight: bold;
}

.connection-line {
    position: absolute;
    background-color: var(--cyber-blue);
    height: 2px;
    z-index: 1;
    transform-origin: left center;
}

.line-1 {
    top: 35%;
    left: 22%;
    width: 28%;
    transform: rotate(45deg);
}

.line-2 {
    top: 35%;
    right: 22%;
    width: 28%;
    transform: rotate(-45deg);
}

.line-3 {
    bottom: 35%;
    left: 22%;
    width: 28%;
    transform: rotate(-45deg);
}

.line-4 {
    bottom: 35%;
    right: 22%;
    width: 28%;
    transform: rotate(45deg);
}

/* Таймлайн улик */
.clues-timeline {
    position: relative;
    padding-left: 30px;
}

.clues-timeline::before {
    content: '';
    position: absolute;
    left: 15px;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: var(--cyber-blue);
}

.timeline-item {
    position: relative;
    margin-bottom: 25px;
}

.timeline-marker {
    position: absolute;
    left: -32px;
    top: 0;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background-color: var(--cyber-green);
    border: 3px solid var(--dark-bg);
}

.timeline-content {
    background-color: rgba(26, 26, 46, 0.5);
    padding: 15px;
    border-radius: 8px;
    border-left: 3px solid var(--cyber-green);
}

.timeline-content h4 {
    margin-bottom: 5px;
}

/* Карточки подозреваемых */
.suspect-card {
    background-color: rgba(26, 26, 46, 0.7);
    border-radius: 10px;
    padding: 15px;
    border: 1px solid #2d2d44;
    transition: all 0.3s ease;
    cursor: pointer;
}

.suspect-card:hover {
    border-color: var(--cyber-blue);
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 179, 255, 0.2);
}

.suspect-card.active {
    border-color: var(--cyber-green);
    background-color: rgba(0, 255, 157, 0.1);
}

.suspect-header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
}

.suspect-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-purple));
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-right: 15px;
    color: white;
}

.suspect-name {
    font-weight: bold;
    font-size: 1.1rem;
}

.suspect-role {
    font-size: 0.9rem;
    color: #b0b0c0;
}

.suspect-info {
    font-size: 0.9rem;
    color: #b0b0c0;
}

.suspect-info p {
    margin-bottom: 5px;
}

/* Выбор подозреваемого */
.suspect-select {
    background-color: rgba(26, 26, 46, 0.7);
    border-radius: 10px;
    padding: 20px 10px;
    border: 2px solid #2d2d44;
    transition: all 0.3s ease;
    cursor: pointer;
    text-align: center;
}

.suspect-select:hover {
    border-color: var(--cyber-blue);
    transform: translateY(-5px);
}

.suspect-select.selected {
    border-color: var(--cyber-green);
    background-color: rgba(0, 255, 157, 0.1);
    transform: translateY(-5px);
}

.select-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--cyber-blue), var(--cyber-purple));
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin: 0 auto 10px;
    color: white;
    font-size: 1.2rem;
}

.select-name {
    font-weight: bold;
    margin-bottom: 5px;
}

.select-role {
    font-size: 0.8rem;
    color: #b0b0c0;
}

/* Кнопка подсказки */
.hint-btn {
    background: linear-gradient(135deg, #f59e0b, #fbbf24);
    color: #333;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
    position: relative;
    overflow: hidden;
    z-index: 10;
}

.hint-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.7s ease;
}

.hint-btn:hover::before {
    left: 100%;
}

.hint-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(245, 158, 11, 0.4);
}

.hint-btn:active {
    transform: translateY(0);
}

.hint-counter {
    background-color: rgba(0, 0, 0, 0.2);
    color: #333;
    padding: 2px 8px;
    border-radius: 20px;
    font-size: 0.9rem;
    margin-left: 5px;
    font-weight: bold;
}

/* Модальное окно подсказки */
.hint-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: 100vh;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    pointer-events: none;
}

.hint-modal:not(.hidden) {
    pointer-events: all;
}

.hint-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0);
    transition: background-color 0.3s ease;
}

.hint-modal:not(.hidden) .hint-modal-overlay {
    background-color: rgba(0, 0, 0, 0.8);
}

.hint-modal-content {
    position: relative;
    top: 0;
    left: 50%;
    transform: translateX(-50%) translateY(-20px);
    width: 90%;
    max-width: 500px;
    background: linear-gradient(135deg, #1a1a2e, #16213e);
    border-radius: 12px;
    border: 2px solid #f59e0b;
    box-shadow: 0 10px 40px rgba(245, 158, 11, 0.3);
    overflow: hidden;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    z-index: 10000;
}

.hint-modal:not(.hidden) .hint-modal-content {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
}

.hint-close-btn {
    background: rgba(245, 158, 11, 0.2);
    border: 1px solid rgba(245, 158, 11, 0.4);
    color: #fbbf24;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    border: none;
}

.hint-close-btn:hover {
    background: rgba(245, 158, 11, 0.3);
    transform: rotate(90deg);
}

/* Кнопки навигации */
.nav-btn {
    background: linear-gradient(135deg, #3b82f6, #1d4ed8);
    border: none;
    color: white;
    padding: 0.75rem 1.5rem;
    border-radius: 50px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    white-space: nowrap;
}

.nav-btn:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: 0 6px 18px rgba(59, 130, 246, 0.4);
}

.nav-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
}

#prev-btn {
    background: linear-gradient(135deg, #6b7280, #4b5563);
}

#prev-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #4b5563, #374151);
    box-shadow: 0 6px 18px rgba(107, 114, 128, 0.4);
}

/* Точки прогресса */
.stage-progress {
    display: flex;
    align-items: center;
}

.stage-dots {
    display: flex;
    gap: 10px;
    justify-content: center;
    flex-wrap: nowrap;
    width: 100%;
}

.stage-dot {
    width: 12px;
    height: 12px;
    min-width: 12px;
    min-height: 12px;
    flex-shrink: 0;
    flex-grow: 0;
    border-radius: 50%;
    background-color: #374151;
    transition: all 0.3s ease;
    cursor: pointer;
    position: relative;
    display: block;
}

.stage-dot.active {
    background-color: #3b82f6;
    transform: scale(1.3);
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
}

.stage-dot.completed {
    background-color: #10b981;
}

.stage-dot:hover::after {
    content: attr(data-stage);
    position: absolute;
    top: -25px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #1f2937;
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 0.75rem;
    white-space: nowrap;
    z-index: 10;
}

/* Результат */
.result-card {
    background: linear-gradient(135deg, var(--card-bg), #16213e);
    border-radius: 20px;
    padding: 40px;
    text-align: center;
    border: 2px solid transparent;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
}

.isit-result {
    border-color: var(--cyber-green);
    background: linear-gradient(135deg, rgba(0, 255, 157, 0.1), rgba(0, 179, 255, 0.1));
}

.bist-result {
    border-color: var(--cyber-purple);
    background: linear-gradient(135deg, rgba(157, 78, 221, 0.1), rgba(255, 0, 110, 0.1));
}

.result-icon {
    font-size: 80px;
    margin-bottom: 20px;
}

.result-title {
    font-size: 2.5rem;
    margin-bottom: 20px;
}

.result-description {
    font-size: 1.2rem;
    line-height: 1.6;
    margin-bottom: 30px;
    color: #b0b0c0;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 20px;
    margin-top: 30px;
}

.stat-item {
    background-color: rgba(255, 255, 255, 0.05);
    padding: 20px;
    border-radius: 12px;
    backdrop-filter: blur(10px);
}

.stat-value {
    font-size: 2.5rem;
    font-weight: bold;
    margin-bottom: 10px;
}

.stat-label {
    font-size: 1rem;
    color: #b0b0c0;
}

.action-btn {
    padding: 15px 30px;
    border-radius: 10px;
    font-weight: bold;
    font-size: 1.1rem;
    color: white;
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
}

.action-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
}

/* Адаптивность */
/* =========================== */
/* МОБИЛЬНАЯ АДАПТАЦИЯ */
/* =========================== */

/* Общие мобильные стили */
@media (max-width: 768px) {
    /* Уменьшаем размеры шрифтов */
    body {
        font-size: 14px;
    }
    
    .text-4xl, .text-6xl {
        font-size: 1.75rem !important;
        line-height: 1.2;
    }
    
    .text-3xl {
        font-size: 1.5rem !important;
    }
    
    .text-2xl {
        font-size: 1.25rem !important;
    }
    
    .text-xl {
        font-size: 1.125rem !important;
    }
    
    /* Улучшаем кнопку "Принять вызов" для мобильных */
    .start-btn {
        padding: 16px 24px !important;
        font-size: 1.1rem !important;
        width: 90%;
        margin: 0 auto;
        display: block;
    }
    
    /* Заставка для мобильных */
    #splash-screen {
        padding: 16px !important;
    }
    
    .logo-digit {
        font-size: 2.5rem !important;
    }
    
    .digital-logo {
        gap: 10px !important;
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .story-intro {
        padding: 20px !important;
        margin: 20px 0 !important;
    }
    
    .typing-animation {
        white-space: normal !important;
        border-right: none !important;
        animation: none !important;
        width: 100% !important;
    }
    
    /* Шапка прогресса на мобильных */
    #progress-container {
        padding: 8px 12px !important;
    }
    
    #progress-bar {
        height: 3px;
    }
    
    #progress-container > div {
        flex-direction: column;
        gap: 8px;
        align-items: flex-start;
    }
    
    #progress-container > div > div {
        width: 100%;
        justify-content: space-between;
    }
    
    /* Основной контент */
    #quest-container {
        padding: 16px !important;
        margin-top: 80px !important;
    }
    
    /* Карточки для мобильных */
    .evidence-card, .puzzle-card {
        margin: 10px 0 !important;
        padding: 16px !important;
    }
    
    .evidence-content, .puzzle-input {
        padding: 0 !important;
    }
    
    /* Исправляем сетку для мобильных */
    .grid.md\\:grid-cols-2 {
        grid-template-columns: 1fr !important;
        gap: 20px !important;
    }
    
    /* Терминал для мобильных */
    .terminal-window {
        margin: 20px 0 !important;
    }
    
    .terminal-body {
        padding: 16px !important;
        font-size: 12px !important;
    }
    
    /* База данных на мобильных */
    .db-row {
        grid-template-columns: 40px 1fr 1fr !important;
        font-size: 12px !important;
        padding: 8px 12px !important;
    }
    
    /* Подсказки внутри карточек */
    .clue-hint {
        flex-direction: column;
        text-align: center;
    }
    
    .clue-hint i {
        margin-right: 0 !important;
        margin-bottom: 10px !important;
    }
    
    /* Логическая блок-схема для мобильных */
    .logic-flowchart {
        transform: scale(0.9) !important;
        transform-origin: top center !important;
    }
    
    .flowchart-node {
        min-width: 180px !important;
        padding: 12px !important;
        font-size: 14px;
    }
    
    /* Доска улик для мобильных */
    .evidence-connections {
        height: 300px !important;
        margin: 20px 0 !important;
    }
    
    .connection-node {
        width: 50px !important;
        height: 50px !important;
        font-size: 1.2rem !important;
    }
    
    .connection-center {
        width: 70px !important;
        height: 70px !important;
        font-size: 1.5rem !important;
    }
    
    .center-label {
        font-size: 0.7rem !important;
    }
    
    /* Таймлайн улик */
    .clues-timeline {
        padding-left: 20px !important;
    }
    
    .timeline-marker {
        left: -25px !important;
        width: 16px !important;
        height: 16px !important;
    }
    
    /* Выбор подозреваемого */
    .suspect-select {
        padding: 12px 8px !important;
        margin: 5px 0 !important;
    }
    
    .select-avatar {
        width: 40px !important;
        height: 40px !important;
        font-size: 1rem !important;
    }
    
    /* Навигация для мобильных */
    #navigation {
        flex-direction: column-reverse !important;
        gap: 15px !important;
        margin: 30px 0 !important;
    }
    
    .nav-btn {
        width: 100% !important;
        justify-content: center;
        padding: 14px 20px !important;
    }
    
    .hint-btn {
        width: 100%;
        justify-content: center;
        margin: 10px 0 !important;
    }
    
    .stage-progress {
        width: 100%;
        justify-content: center;
    }
    
    /* Результаты на мобильных */
    .result-card {
        padding: 24px !important;
        margin: 20px 0 !important;
    }
    
    .result-icon {
        font-size: 50px !important;
    }
    
    .result-title {
        font-size: 1.75rem !important;
    }
    
    .stats-grid {
        grid-template-columns: 1fr !important;
        gap: 15px !important;
    }
    
    .action-btn {
        width: 100% !important;
        margin: 8px 0 !important;
    }
    
    /* Модальные окна для мобильных */
    .hint-modal-content {
        width: 95% !important;
        top: 10px !important;
        max-height: 80vh !important;
    }
    
    .hint-modal-body {
        max-height: 50vh !important;
        padding: 16px !important;
    }
    
    .info-modal {
        padding: 10px !important;
    }
    
    .info-modal > div {
        max-height: 85vh !important;
    }
    
    /* Информация о направлениях */
    .specialty-info {
        margin-bottom: 30px !important;
    }
    
    /* Скрываем лишние элементы на мобильных */
    .case-visual:has(.evidence-connections) {
        order: -1;
    }
}

/* Мелкие экраны (до 480px) */
@media (max-width: 480px) {
    .logo-digit {
        font-size: 2rem !important;
    }
    
    .start-btn {
        padding: 14px 20px !important;
        font-size: 1rem !important;
    }
    
    #quest-container {
        padding: 12px !important;
    }
    
    .case-header {
        padding: 10px 0 !important;
    }
    
    .case-tag {
        font-size: 0.8rem;
        padding: 4px 12px;
    }
    
    .terminal-body {
        font-size: 11px !important;
        padding: 12px !important;
    }
    
    .code-snippet {
        font-size: 0.8rem !important;
        padding: 12px !important;
    }
    
    .connection-node {
        width: 40px !important;
        height: 40px !important;
        font-size: 1rem !important;
    }
    
    .connection-center {
        width: 60px !important;
        height: 60px !important;
        font-size: 1.2rem !important;
    }
    
    .evidence-connections {
        height: 250px !important;
    }
    
    .suspect-card {
        padding: 12px !important;
    }
    
    .suspect-avatar {
        width: 32px !important;
        height: 32px !important;
        font-size: 0.9rem !important;
    }
    
    .result-icon {
        font-size: 40px !important;
    }
    
    .result-title {
        font-size: 1.5rem !important;
    }
}

/* Ландшафтная ориентация на мобильных */
@media (max-height: 600px) and (orientation: landscape) {
    #splash-screen {
        padding: 10px !important;
        min-height: auto !important;
        height: auto !important;
    }
    
    .logo-digit {
        font-size: 2rem !important;
    }
    
    .story-intro {
        margin: 10px 0 !important;
        padding: 15px !important;
    }
    
    .skill-card {
        padding: 12px !important;
    }
    
    .start-btn {
        padding: 12px 20px !important;
        font-size: 1rem !important;
    }
    
    #quest-container {
        margin-top: 60px !important;
    }
}

/* Планшеты (768px - 1024px) */
@media (min-width: 769px) and (max-width: 1024px) {
    .logo-digit {
        font-size: 3rem !important;
    }
    
    .grid.md\\:grid-cols-2 {
        gap: 30px !important;
    }
    
    .terminal-body {
        font-size: 13px !important;
    }
    
    .db-row {
        font-size: 13px !important;
    }
    
    .evidence-connections {
        height: 350px !important;
    }
}

/* =========================== */
/* УЛУЧШЕНИЯ ДЛЯ КАСАНИЙ */
/* =========================== */

/* Делаем все кликабельные элементы удобнее для пальцев */
button, 
input[type="radio"], 
input[type="checkbox"], 
.suspect-select,
.suspect-card,
.login-option,
.algorithm-option,
.vulnerability-option,
.connection-node,
.stage-dot {
    min-height: 44px; /* Минимальная высота для удобного касания */
    touch-action: manipulation; /* Улучшает отзывчивость на касания */
}

/* Увеличиваем область касания для маленьких элементов */
input[type="radio"], 
input[type="checkbox"] {
    transform: scale(1.2);
    margin-right: 12px;
}

/* Улучшаем скролл на мобильных */
html {
    -webkit-overflow-scrolling: touch;
}

/* Убираем выделение при тапе */
button, a {
    -webkit-tap-highlight-color: transparent;
}

/* Улучшаем видимость фокуса для доступности */
button:focus,
input:focus,
select:focus {
    outline: 2px solid var(--cyber-blue) !important;
    outline-offset: 2px;
}

/* =========================== */
/* ИСПРАВЛЕНИЯ ДЛЯ iOS */
/* =========================== */
@supports (-webkit-touch-callout: none) {
    .min-h-screen {
        min-height: -webkit-fill-available;
    }
    
    #splash-screen {
        min-height: -webkit-fill-available;
    }
    
    .hint-modal-body {
        -webkit-overflow-scrolling: touch;
    }
}

/* =========================== */
/* ИСПРАВЛЕНИЯ ДЛЯ Android */
/* =========================== */
@media (-webkit-min-device-pixel-ratio: 2) {
    .start-btn,
    .puzzle-check-btn,
    .hint-btn,
    .nav-btn,
    .action-btn {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
}

/* =========================== */
/* ОПТИМИЗАЦИЯ ЗАГРУЗКИ НА МОБИЛЬНЫХ */
/* =========================== */
@media (max-width: 768px) {
    /* Отключаем сложные анимации на слабых устройствах */
    @media (prefers-reduced-motion: reduce) {
        * {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
    }
    
    /* Упрощаем градиенты для производительности */
    .start-btn,
    .puzzle-check-btn,
    .hint-btn {
        background-image: linear-gradient(to right, var(--cyber-blue), var(--cyber-green)) !important;
    }
}

/* Класс для мобильных устройств */
.is-mobile {
    /* Улучшаем читаемость на мобильных */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    
    /* Улучшаем рендеринг шрифтов */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* Скрываем курсор на мобильных */
.is-mobile .cursor {
    display: none;
}

/* Улучшаем интерактивные элементы на мобильных */
.is-mobile button:active,
.is-mobile .suspect-select:active,
.is-mobile .login-option:active,
.is-mobile .algorithm-option:active {
    transform: scale(0.98);
    transition: transform 0.1s;
}

/* Улучшаем видимость активных элементов */
.is-mobile input:focus,
.is-mobile select:focus,
.is-mobile textarea:focus {
    font-size: 16px !important; /* Предотвращает масштабирование в iOS */
}

/* Улучшаем скроллбар на мобильных (где поддерживается) */
.is-mobile ::-webkit-scrollbar {
    width: 8px;
}

.is-mobile ::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.1);
}

.is-mobile ::-webkit-scrollbar-thumb {
    background: var(--cyber-blue);
    border-radius: 4px;
}

/* Адаптация для очень маленьких экранов */
@media (max-width: 360px) {
    .logo-digit {
        font-size: 1.8rem !important;
    }
    
    .start-btn {
        font-size: 0.95rem !important;
        padding: 12px 16px !important;
    }
    
    .case-tag {
        font-size: 0.7rem;
        padding: 3px 10px;
    }
    
    .terminal-header {
        padding: 8px 12px !important;
    }
    
    .connection-node {
        width: 35px !important;
        height: 35px !important;
        font-size: 0.9rem !important;
    }
    
    .connection-center {
        width: 50px !important;
        height: 50px !important;
        font-size: 1rem !important;
    }
    
    .evidence-connections {
        height: 200px !important;
    }
}

/* Высокие экраны (современные смартфоны) */
@media (min-height: 800px) and (max-width: 768px) {
    #splash-screen {
        justify-content: flex-start !important;
        padding-top: 40px !important;
    }
    
    .logo-container {
        margin-bottom: 40px !important;
    }
}

/* Исправление для клавиатуры на мобильных */
@media (max-height: 500px) and (orientation: landscape) {
    input:focus, textarea:focus {
        font-size: 16px !important;
    }
    
    .puzzle-input input {
        height: 44px !important;
    }
}